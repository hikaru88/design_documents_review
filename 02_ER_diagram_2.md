# ER 図 2

## 全体

- 指摘事項

## テーブル名

- 指摘事項

# 注意

- マークダウン形式で記入してください。
- 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

## 全体
- 入荷したものを管理するテーブルが存在しない

- 配送先テーブルが存在しない

- カーディナリティの記述不足

- カーディナリティで1:Nの関係において記述がおかしい

- 管理者のカーディナリティがいらない

- ユーザーテーブル名がエンドユーザーになっている

## ユーザー

- 配送先テーブルの FK がない

- 名カラムがない

- 配送先カラムがいらない

##　商品

- 商品名カラムがない

- 発売日カラムがない

- ディスクカラムが必要ない

- 在庫枚数カラムが必要ない

- また、入荷数カラムが必要

- ディスク枚数カラムが必要ない

## ディスク
- 曲名カラムがない

- トラックNo. カラムからは何のカラムなのか連想できないため、ディスクNo.カラムにする必要がある

## カートアイテム
- 購入商品を保存するためのカラムがない

## 曲名
- 曲の順番を管理するためのカラムがない

## 購入
- 配送ステータスを保存するためのカラムがない

- 購入方法を指定するためのカラムがない

- 管理者目線のテーブルなので購入ではなく受注にテーブル名を変える

- 購入日カラムがcreated_atと重複している

## 購入詳細
- 小計金額が必要ない

- 購入詳細ではなく受注詳細に変える

- 購入時の値段を保存するカラムが必要

## ジャンル
- ジャンル名にカラムを変更する

## レーベル
- レーベル名にカラムを変更する

## レビュー
## 全体
- 曲テーブルがない場合、どのように曲を管理しますか？(ディスクテーブルで曲を管理するとデータが重複します。)
- 入荷したものを管理する場所がありません。
- カーディナリティの不足、過剰を具体的にお願いします。

## ユーザー
- 郵便番号はどうして不要なのでしょうか？
- ディスク枚数カラムはデータとして保存する必要があるでしょうか？
- 在庫数カラムは計算結果(入荷数-売り上げ)なのでデータとして保存するには適しません。(代わりに生のデータである入荷数が必要になります。)

## ディスク
- トラックnoカラムのカラム名から役割が連想できません。

## 曲
- 曲順はどのように管理するのでしょうか？

## 購入
- 命名は管理者目線が好ましいです。(購入はユーザー視点なので、受注など)
- 購入日カラムはcreated_atと役割が重複しています。

## 購入詳細
- 命名は管理者目線が好ましいです。(購入詳細はユーザー視点なので、受注詳細など)
- 購入時の値段を保存するカラムがありません。

## ジャンル、レーベル
- ジャンル、レーベルカラムがあるが、役割が不明です。



# レビュー2回目

## 全体
- 管理者のカーディナリティがいらない
  > 正しくは、管理者とエンドユーザ、管理者と商品のリレーションが必要ないです。

- ユーザーテーブル名がエンドユーザーになっている
  > エンドユーザーではダメですか？理由を教えてください。
  
  ## ユーザー
- 配送先テーブルの FK がない
  > エンドユーザにFKは本当に必要ですか？カーディナリティを見直してみましょう。

- 配送先カラムがいらない
  > 配送先カラムは必要です。そこのカラムには、ユーザのデフォルトで使用する配送先情報が入ります。
  
- PKはエンドユーザidとなるべきですがユーザidになっています。

##　商品
- 商品名カラムがない
  > シングル/アルバム名カラム = 商品名カラムです。

- また、入荷数カラムが必要
  > 入荷テーブルがあれば入荷数カラムは必要ないです。

- FKのディスクidカラムは必要ないです。

## ディスク
- 曲名カラムがない
  > 曲情報はディスクテーブルに保存しますか？

- 商品とのリレーションが逆です。

## カートアイテム
- 購入商品を保存するためのカラムがない
  > カートアイテムと商品にはリレーションがあるため、商品を保存するカラムを用意する必要はありません。
 
- PKがありません

- 小計カラムは必要ありません。購入枚数と、商品金額から算出できるためです。

## 曲名
- ディスクとのリレーションが逆です。

## 購入
- 購入方法を指定するためのカラムがない
  > 支払い方法のことですか？

## 購入詳細
- 購入テーブルと購入詳細テーブルのカーディナリティが逆です。

- FKの商品idが必要です；
